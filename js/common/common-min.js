var Common=function(){},version=1,siteName="算力蜂",basePath="http://api.suanlifeng.com",uuid="";function getUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function ajax(){var e={type:(arguments[0].type||"GET").toUpperCase(),url:arguments[0].url||"",async:arguments[0].async||"true",data:arguments[0].data||null,dataType:arguments[0].dataType||"json",contentType:arguments[0].contentType||"application/x-www-form-urlencoded; charset=utf-8",beforeSend:arguments[0].beforeSend||function(){},success:arguments[0].success||function(){},error:arguments[0].error||function(){},version:version,uuid:uuid};e.beforeSend();var t=new plus.net.XMLHttpRequest;t.responseType=e.dataType,t.open(e.type,e.url,e.async),t.setRequestHeader("Content-Type",e.contentType),t.setRequestHeader("App-Version",e.version),t.setRequestHeader("Device-Id",e.uuid),t.send(convertData(e.data)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.success(t.response):e.error())}}function convertData(e){if("object"==typeof e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t=t.substring(0,t.length-1)}return e}mui.plusReady((function(){var e=plus.storage.getItem("version");if(e&&(version=e),!(uuid=plus.storage.getItem("uuid"))){plus.device.getInfo({success:function(e){uuidStr=e.uuid,uuid=-1!=uuidStr.indexOf(",")?uuidStr.slice(0,uuidStr.indexOf(",")):uuidStr},fail:function(e){uuid=getUuid()},complete:function(e){plus.storage.setItem("uuid",JSON.stringify(uuid))}})}})),Common.muipost=function(e,t,n,r,o){var i=basePath+e;mui.os.ios?ajax({type:"POST",url:i,dataType:"json",data:t,beforeSend:function(){try{mui.hideLoading()}catch(e){}},success:function(e){200==e.type?n(e):0==e.type?(mui.toast(e.content),plus.runtime.restart()):400==e.type?mui.toast(e.content):401==e.type?mui.toast(e.content+"\nexceptionId:"+e.exceptionId):r(e)},error:function(){try{mui.hideLoading()}catch(e){}mui.toast("网络异常，无法访问"+xhr.status)}}):mui.ajax(i,{data:t,dataType:"json",type:"POST",timeout:8e3,headers:{"App-Version":version,"Device-Id":uuid},success:function(e){try{mui.hideLoading()}catch(e){}200==e.type?n(e):0==e.type?(mui.toast(e.content),plus.runtime.restart()):400==e.type?mui.toast(e.content):401==e.type?mui.toast(e.content+"\nexceptionId:"+e.exceptionId):r(e)},error:function(e,t,n){try{mui.hideLoading()}catch(e){}mui.toast("网络异常，无法访问"+e.status)}})},Common.isCard=function(e){e=e.replace(/\s+/g,"");return!/^([1-9]{1})(\d{14}|\d{18})$/.test(e)},Common.isNull=function(e){return null==e||""==e},Common.isEqual=function(e,t){return e!=t},Common.isPhoneAvailable=function(e){return!/^1[3-9]\d{9}$/.test(e)},Common.isEmail=function(e){return!new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$").test(e)},Common.numletter_=function(e){return!"^[0-9a-zA-Z_]+$".test(e)},Common.numletter=function(e){return!"^[0-9a-zA-Z]+$".test(e)},Common.isCash=function(e){return!/^\d{6}$/.test(e)},Common.passWord=function(e){return!/^[a-zA-Z\d_]{8,}$/.test(e)},Common.english=function(e){return!"[a-zA-Z]".test(e)},Common.china=function(e){return!"^[Α-￥]+$".test(e)},Common.money=function(e){return!"^[0-9]+[.][0-9]{0,3}$".test(e)},Common.moneyFormat=function(e){return Common.moneyFormatByDecimals(e,2)},Common.moneyFormatByDecimals=function(e,t){var n=new String(e);-1==n.indexOf("E")&&-1==n.indexOf("e")||(n=Common.scientificToNumber(n));var r=Math.abs(t);-1==n.indexOf(".")&&(n+=".00");var o=n.split(".");return o[1].length<r?o[1]+=new Array(r-o[1].length+1).join("0"):o[1].length>r&&o[1][2]>0?o[1]=Math.ceil(o[1].substr(0,r+1)/10):o[1]=o[1].substr(0,r),o.join(".")},Common.scientificToNumber=function(e){var t=new String(e);if(-1!=t.indexOf("E")||-1!=t.indexOf("e")){var n=/^(\d+[\.]?\d+|\d+)(e|E)([\-]?\d+)$/;if(n.test(t)){var r,o,i="";r=n.exec(t),o=Math.abs(r[3])-1;for(var u=0;u<o;u++)i+="0";var a=r[1];return-1!=a.indexOf(".")&&(a=a.replace(".","")),"0."+i+a}var s=new RegExp("^((\\d+.?\\d+)[Ee]{1}(\\d+))$","ig"),c=s.exec(t),m="",x="";return null!=c&&(m=c[2],x=c[3],c=s.exec(t)),""!=m&&""!=x&&(m*=Math.pow(10,x)),m}return t},Common.accMul=function(e,t){var n=0,r=e.toString(),o=t.toString();try{n+=r.split(".")[1].length}catch(e){}try{n+=o.split(".")[1].length}catch(e){}return Number(r.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)},Common.dateFtt=function(e,t){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},Common.dateAdd=function(e,t){return null!=e&&""!=e||(e=1),(t=new Date(t)).setDate(t.getDate()+e),t}(function(e){e.ajaxSetup({type:"POST",async:!0,dataType:"json",timeout:3e4}),e.fn.getFormData=function(t){var n=e(this).find("input,select,textarea"),r={};return layui.each(n,(function(n,o){if(o.name&&(!/^checkbox|radio$/.test(o.type)||o.checked)){var i=o.value;"checkbox"==o.type&&r[o.name]&&(i=r[o.name]+","+i),t&&e.isEmpty(i)||(r[o.name]=i)}})),r},e.fn.serializeJson=function(){var t={},n=this.serializeArray();this.serialize();return e(n).each((function(){t[this.name]?e.isArray(t[this.name])?t[this.name].push(this.value):t[this.name]=[t[this.name],this.value]:t[this.name]=this.value})),t},e.extend({isEmpty:function(e){return null===e||null==e||""===e},result:function(t,n,r){var o="";if(!e.isEmpty(t)&&e.isObject(t)&&!e.isEmpty(n)){var i=n.split("."),u=i.length;e.each(i,(function(n,r){if(t=t[r],u-1==n&&(o=t),!e.isObject(t))return!1}))}return e.isEmpty(o)&&!e.isEmpty(r)&&(o=r),o},isObject:function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},startsWith:function(e,t){return 0==e.indexOf(t)},setSessionStorage:function(e,t){sessionStorage.setItem(e,t)},getSessionStorage:function(e){return null==sessionStorage.getItem(e)?"":sessionStorage.getItem(e)},removeSessionStorage:function(e){sessionStorage.removeItem(e)},clearSessionStorage:function(){sessionStorage.clear()},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}})}(jQuery));